(function(){function k(){d(l,b);delete h[m];delete h[t]}function e(i){if(!a){return}a.parentNode.removeChild(a);d(g,e);if(i&&i.type!=g){history.back()}n=false}function x(E,D){var G=E.dataset,C=E.innerHTML,B=E.getAttribute("href"),F,H;G.button=D+1;G.label=C;G.origin=j(location.href);G.referer=location.href;H=B+"&"+y(G);F=s("width:0px;height:24px;");F.src=H;E.innerHTML="";E.parentNode.replaceChild(F,E);return{element:E,iframe:F}}function b(C){if(typeof C.data!="string"){return}var B=C.data.split("|");if(B[0]!="mymail"&&B[0]!="mailster"){return}switch(B[1]){case"d":var i=u[B[4]-1].iframe;i.style.width=B[2]+"px";i.style.height=B[3]+"px";break;case"s":if(n){break}var i=s("left:0px;top:0px;width:100%;height:100%;z-index:999999;position:fixed !important;",function(){u[B[4]-1].iframe.contentWindow.postMessage("l",B[2]);A(g,e);history.pushState(c,c,location.href)});i.src=B[2];z.getElementsByTagName("body")[0].appendChild(i);a=i;n=true;break;case"c":e();break}}function s(i,C){var B=z.createElement("iframe");B[w]("frameBorder","0");B[w]("allowtransparency","true");B[w]("scrolling","no");B.style.cssText=v+i;B.onload=function(){B.style.visibility="visible";C&&C()};return B}function j(i){var B=i.split("/");return B[0]+"//"+B[2]}function y(C,i,E){var B=[],D;Object.keys(C).forEach(function(I){var F=I;i&&!isNaN(F)?F=i+F:"";var F=encodeURIComponent(F.replace(/[!'()*]/g,escape));E?F=E+"["+F+"]":"";if(typeof C[I]==="object"){var H=build_query(C[I],c,F);B.push(H)}else{var G=encodeURIComponent(C[I].replace(/[!'()*]/g,escape));if(G=="true"){G="1"}if(G=="false"){G="0"}(D=I.match(/^user([A-Z].*)/))?B.push("userdata["+D[1].toLowerCase()+"]="+G):B.push(F+"="+G)}});return B.join("&")}function A(B,C,i){(h.addEventListener)?h.addEventListener(B,C,!!i):h.attachEvent("on"+B,C)}function d(i,B){(h.removeEventListener)?h.removeEventListener(i,B):h.detachEvent("on"+i,B)}var h=window,z=document,m="MyMailSubscribe",t="MailsterSubscribe",c=null,p=".mymail-subscribe-button",o=".mailster-subscribe-button",f=z.querySelectorAll(p),r=z.querySelectorAll(o),a,w="setAttribute",l="message",g="popstate",v="border:0;overflow:hidden;visibility:hidden;display:inline-block;margin:0px !important;padding:0px !important;background:transparent;",n=false,u=[],q;if(h[m]&&h[m].loaded){return}if(h[t]&&h[t].loaded){return}for(q=f.length-1;q>=0;q--){u[q]=x(f[q],q)}for(q=r.length-1;q>=0;q--){u[q]=x(f[q],q)}A(l,b);h[m]={loaded:true,destroy:k,close:e};h[t]={loaded:true,destroy:k,close:e}})();